from __future__ import annotations

import argparse

from .pipeline import run_scenario


def main() -> None:
    parser = argparse.ArgumentParser(description="Run PRAXIS-Core scenario.")
    parser.add_argument("--scenario-config", required=True, help="Path to scenario JSON.")
    parser.add_argument("--priors", required=True, help="Path to priors JSON.")
    parser.add_argument("--ccf-groups", required=True, help="Path to CCF groups JSON.")
    parser.add_argument("--fault-tree", required=True, help="Path to fault tree JSON.")
    parser.add_argument("--cascade", required=True, help="Path to cascade JSON.")
    parser.add_argument("--out-dir", required=True, help="Output directory.")
    parser.add_argument("--pseudo-n", type=float, default=5.0, help="Pseudo sample size for Beta-Binomial.")
    parser.add_argument("--no-report", action="store_true", help="Do not write text report.")

    args = parser.parse_args()

    run_scenario(
        scenario_config_path=args.scenario_config,
        priors_path=args.priors,
        ccf_groups_path=args.ccf_groups,
        fault_tree_path=args.fault_tree,
        cascade_path=args.cascade,
        out_dir=args.out_dir,
        pseudo_n=args.pseudo_n,
        write_report=not args.no_report,
    )


if __name__ == "__main__":
    main()
